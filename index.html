---
layout: hackscribble-main
title: Hackscribble | Hardware for Arduino and LPCXpresso FRAM
---

	<section id="content" class="">

        <div class="row" class = "">
		    <div class="large-12 columns my-column">	
			    <h2 class="my-headline">Hardware for Arduino and LPCXpresso FRAM.</h2>
                <p>
                    How to add fast, versatile, non-volatile ferroelectric memory (FRAM) to your Arduino
                    or LPCXpresso board using the Hackscribble Ferro library.
                </p>
                <p><p>
            </div>
        </div>

        <div class="row">
            <div class="large-12 columns">
                <hr class="my-hr"></hr>
            </div>
        </div>
 
		<div class="row" class = "">

	        <div class="large-8 columns my-column">	
                <h2 class="my-headline">Getting started.</h2>
                <p>
                    When we wrote the <a href="http://www.hackscribble.com/hackscribble-ferro-library"><b>Hackscribble Ferro library</b></a>
                    to add FRAM to our Arduino projects, we needed hardware to test it with.  Our first version used a breadboard,
                    an SOIC-8 breakout from <a href="http://www.qrpme.com" target="_blank">QPRme</a> for the MB85RS 
                    FRAM chip and an <a href="http://www.adafruit.com/products/757" target="_blank"> Adafruit bidirectional level converter</a>.
                </p> 
                <p>
                    The hardware worked first time, but the software took a few attempts. However, with
                    everything proved on the bench, we decided to move on to a more permanent test rig.
                    We swapped the breadboard for an Arduino prototyping shield from 
                    <a href="http://www.dfrobot.com" target="_blank">DFRobot</a>, plugged the level
                    converter into header sockets (so we could borrow it for other projects) and hardwired
                    the FRAM breakout.
                </p>
                <img class="my-image" src="img/FRAM_proto_board_wide.jpg" />
                <hr class="my-hr"></hr>
                <h2 class="my-headline">Smaller is better.</h2>
		        <p>
                    We have been experimenting with FRAM because we want to add storage to a test equipment project that's
                    in development.  The FRAM will be built into the PCB for that project rather than being
                    added as an Arduino shield. So we started some design work on fragments of circuit boards to see 
                    how small we could make the combination of FRAM and level converter.  
                </p>
                <p>
                    The first design is based on the Adafruit level converter, which in turn is taken from an 
                    <a href="http://www.adafruit.com/datasheets/AN10441.pdf" target="_blank">
                    NXP application note</a>.  The circuit uses BSS138 MOS-FETs and some resistors.  One FRAM chip and
                    the level converter components use about 25mm by 10mm of PCB space.  With pin headers added to 
                    turn it into a breakout board, it is still only 25mm by 18mm, plus space for labelling.
                </p>
                <img class="my-image" src="img/pcb_discrete.jpg" />
                <p>
                    We thought we could do better than this, however.  The level converter is bidirectional and I2C compatible.
                    We don't need I2C for this application, and can make do with a simpler circuit based on the TXB0104 chip.
                </p>
                <p>
                    This circuit takes up only 20mm by 10mm.  Pin headers take it up to 20mm by 20mm, plus space for labelling.
                </p>
                <img class="my-image" src="img/pcb_integrated.jpg" />
                <p>
                    We have not yet built and tested either fragment in hardware, but both circuits
                    check out OK on paper. Our new mini-shield (see below) uses the big brother of the TXB0104.
                </p>
                <hr class="my-hr"></hr>
                <h2 class="my-headline">Making it easier with a shield.</h2>
                <p>
                    When we decided to build a FRAM mini-shield, we had three goals:
                    <ul>
                        <li>Make it easy to add FRAM to future projects.</li>
                        <li>Be compatible with both 5V Arduino boards and 3.3V LPCXpresso boards.</li>
                        <li>Include SPI test points to make it easy to hook up a data analyser for software debugging.</li>
                    </ul>
                </p>
				<p>
					Our first design has space for up to three 3.3V FRAM ICs and a TXB0108 level converter for compatibility with 
					the Arduino's 5V logic levels. The three FRAMs use digital pins 8, 9 and 10 as chip select. After wrestling with 
					a faulty FRAM for a while, the hardware worked first time on both the LPCXpresso and Arduino boards.
				</p>
				<img class="my-image" src="img/mini-shield-prototype.jpg" />
                <p>
					We have already spotted some improvements that we will publish in a Revision B board soon. Then we will produce a 
					version without the SPI test pins, since many people will not want these and the PCB can be made smaller without them.
				</p>
            </div>
			
			<div class="large-4 columns my-column">
                <hr class="my-hr show-for-small"></hr>
                <p>
                    <b>
                        <a href="{{ site.github.repository_url }}/archive/master.zip">
                            Download the schematics and board layouts.
                        </a>
                    </b>
                </p>
                <img class="my-image" src="img/breakout_schematics.jpg" />
				<img class="my-image" src="img/mini-shield-revision-A.jpg" />
                <p>
                    <b>
                        <a href="{{ site.github.repository_url }}"><i class="icon-github"></i>&nbsp;&nbsp;Go to GitHub repository.</a>
                    </b>
                </p>
                <div class="panel">
                    <dl>
                        <dt>Want the software?</dt>
                        <dd>
                            <a href="http://www.hackscribble.com/hackscribble-ferro-library">Get the Hackscribble Ferro library.</a>
                        </dd>
                    </dl>
                </div>
			</div>
			
        </div>

    </section>


